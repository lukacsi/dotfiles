# Use the official schema for completions in supporting editors
"$schema" = "https://starship.rs/config-schema.json"

# Fast, readable prompt: two lines, with a clear error indicator
add_newline = true
command_timeout = 1000  # ms; prevents slow external calls from hanging the prompt

# Top line shows: path Â· git Â· k8s Â· cloud Â· IaC Â· container Â· duration Â· exit status
# Bottom line: prompt symbol only (green âœ on success, red âœ— on error)
format = """
$directory$git_branch$git_status$git_commit$kubernetes$gcloud$terraform$docker_context$container$cmd_duration$status
$character
"""

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Prompt symbol & basic shell feel
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[character]
success_symbol = "âœ "
error_symbol   = "âœ— "

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Filesystem / path
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[directory]
truncation_length = 4
truncate_to_repo  = true
style = "cyan"
read_only = " ğŸ”’"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Git signal (succinct but informative)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[git_branch]
symbol = "ï˜ "            # Requires a Nerd Font
format = "on $symbol$branch "
style = "bold purple"

[git_status]
format = '($all_status$ahead_behind )'
style = "yellow"
stashed = "â‰¡"
staged  = "+$count"
modified= "~$count"
deleted = "-$count"
untracked = "?$count"
ahead = "â‡¡$count"
behind = "â‡£$count"
diverged = "â‡•â‡¡$ahead_countâ‡£$behind_count"

[git_commit]
commit_hash_length = 7
only_detached = false
tag_disabled = false

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Kubernetes: context + namespace with safety colors
# Uses Starship's kubernetes module + context-specific styles.
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[kubernetes]
disabled = true
symbol = "âˆ "
# Escape parentheses inside literal output
format = 'on $symbol$context( \($namespace\)) '

# Color-code by environment; adjust patterns to match your contexts.
# Starship supports regex patterns and context aliases.
# Examples follow the current "contexts" table approach.
# See: docs & examples in Starship/GitHub issues.
#   - Context pattern â†’ style (and optional alias via capture groups)
#   - Named capture groups can be referenced in aliases (e.g., $cluster)
#     (example usage in upstream issue thread)
# [[kubernetes.contexts]] entries processed top-to-bottom.

# Production â†’ bold red
[[kubernetes.contexts]]
context_pattern = '.*(prod|production|live).*'
style = 'bold red'

# Preprod / UAT / Staging â†’ bold yellow
[[kubernetes.contexts]]
context_pattern = '.*(preprod|uat|staging).*'
style = 'bold yellow'

# Dev / Sandbox â†’ bold green
[[kubernetes.contexts]]
context_pattern = '.*(dev|sandbox).*'
style = 'bold green'

# GKE contexts â†’ shorten to "gke-<cluster>" (example of named capture)
[[kubernetes.contexts]]
context_pattern = 'gke_.*_(?P<cluster>[\\w-]+)'
context_alias   = 'gke-$cluster'
style = 'bold cyan'

# EKS contexts â†’ shorten to "eks-<cluster>"
[[kubernetes.contexts]]
context_pattern = 'arn:aws:eks:.*:cluster/(?P<cluster>[\\w-]+)'
context_alias   = 'eks-$cluster'
style = 'bold blue'

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Cloud: GCP (can add AWS/Azure later if you use them)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[gcloud]
disabled = true
symbol = "â˜ï¸ "
style = "bold blue"
# Let the module's default format show active account/project; tweak later if needed. [1](https://starship.rs/config/)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# IaC: Terraform workspace signal
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[terraform]
symbol = "TF "
style = "bold magenta"
format = 'via $symbol$workspace '

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Containers
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[docker_context]
symbol = "ğŸ³ "
style = "bold blue"
format = 'via $symbol$context '

[container]
format = 'in ğŸ“¦ $name '
style = 'dimmed cyan'

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Operational quality-of-life
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[cmd_duration]
min_time = 1000
format = 'â± $duration '
style = "dimmed yellow"

[status]
disabled = false
format = '($status) '
map_symbol = true
recognize_signal_code = true

# Only show host/user on SSH to keep local prompt clean
[hostname]
ssh_only = true
format = '@$hostname '
style = 'bold dimmed green'

[username]
show_always = false
format = '$user '
style_user = 'white bold'
style_root = 'bold red'

